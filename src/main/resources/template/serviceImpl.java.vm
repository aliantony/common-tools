package ${package.ServiceImpl};

import lombok.extern.slf4j.Slf4j;
import org.slf4j.Logger;
import com.antiy.common.base.BaseServiceImpl;
import com.antiy.common.base.PageResult;
import com.antiy.common.base.BaseConverter;
import org.springframework.stereotype.Service;

import ${package.Entity}.${entity};
import ${package.Mapper}.${table.mapperName};
import ${package.Service}.${table.serviceName};
import ${package.Entity}.vo.request.${entity}Request;
import ${package.Entity}.vo.response.${entity}Response;
import ${package.Entity}.vo.query.${entity}Query;

import javax.annotation.Resource;
import java.util.List;
/**
 * <p>
 * $!{table.comment} 服务实现类
 * </p>
 *
 * @author ${author}
 * @since ${date}
 */
@Service
@Slf4j
public class ${table.serviceImplName} extends BaseServiceImpl<${entity}> implements ${table.serviceName}{


        @Resource
        private ${table.mapperName} ${table.entityPath}Dao;

        private BaseConverter<${entity}Request, ${entity}>  requestConverter;
        
        private BaseConverter<${entity}, ${entity}Response> responseConverter;

        @Override
        public Integer save${entity}(${entity}Request request) throws Exception {
            ${entity} ${table.entityPath} = requestConverter.convert(request, ${entity}.class);
            return ${table.entityPath}Dao.insert(${table.entityPath});
        }

        @Override
        public Integer update${entity}(${entity}Request request) throws Exception {
            ${entity} ${table.entityPath} = requestConverter.convert(request, ${entity}.class);
            return ${table.entityPath}Dao.update(${table.entityPath});
        }

        @Override
        public List<${entity}Response> findList${entity}(${entity}Query query) throws Exception {
            return ${table.entityPath}Dao.findList${entity}(query);
        }

        public Integer findCount${entity}(${entity}Query query) throws Exception {
            return ${table.entityPath}Dao.findCount(query);
        }

        @Override
        public PageResult<${entity}Response> findPage${entity}(${entity}Query query) throws Exception {
            return new PageResult<>(query.getPageSize(), this.findCount${entity}(query),query.getCurrentPage(), this.findList${entity}(query));
        }
}
